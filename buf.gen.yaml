version: v2
managed:
  enabled: true
  override:
    - file_option: go_package_prefix
      value: github.com/argoproj/argo-cd/v3
plugins:
  # Generate Go protobuf code using gogofast
  - local: protoc-gen-gogofast
    out: .
    opt:
      - plugins=grpc
      - Mgoogle/protobuf/any.proto=github.com/gogo/protobuf/types
      - Mgoogle/protobuf/duration.proto=github.com/gogo/protobuf/types
      - Mgoogle/protobuf/timestamp.proto=github.com/gogo/protobuf/types
      - Mgoogle/protobuf/empty.proto=github.com/gogo/protobuf/types
      - Mgoogle/protobuf/struct.proto=github.com/gogo/protobuf/types
      - Mgoogle/protobuf/wrappers.proto=github.com/gogo/protobuf/types
      - Mgoogle/api/annotations.proto=google.golang.org/genproto/googleapis/api/annotations
  # Generate gRPC-Gateway reverse proxy (v2)
  - local: protoc-gen-grpc-gateway
    out: .
    opt:
      - logtostderr=true
  # Generate OpenAPI v2 documentation (replaces swagger in grpc-gateway v2)
  - local: protoc-gen-openapiv2
    out: .
    opt:
      - logtostderr=true
